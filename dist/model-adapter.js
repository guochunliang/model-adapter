!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ModelAdapter=e()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){var e=n(t);return null!==t&&("object"===e||"function"===e)}function c(t){for(var e=t.split("."),r=[],n=0;n<e.length;n++){for(var o=e[n];"\\"===o[o.length-1]&&void 0!==e[n+1];)o=o.slice(0,-1)+".",o+=e[++n];r.push(o)}return r}var l={get:function(t,e,r){if(!f(t)||"string"!=typeof e)return void 0===r?t:r;for(var n=c(e),o=0;o<n.length;o++){if(!Object.prototype.propertyIsEnumerable.call(t,n[o]))return r;if(null==(t=t[n[o]])){if(o!==n.length-1)return r;break}}return t},set:function(t,e,r){if(!f(t)||"string"!=typeof e)return t;for(var n=t,o=c(e),i=0;i<o.length;i++){var u=o[i];f(t[u])||(t[u]={}),i===o.length-1&&(t[u]=r),t=t[u]}return n},delete:function(t,e){if(f(t)&&"string"==typeof e)for(var r=c(e),n=0;n<r.length;n++){var o=r[n];if(n===r.length-1)return void delete t[o];if(t=t[o],!f(t))return}},has:function(t,e){if(!f(t)||"string"!=typeof e)return!1;for(var r=c(e),n=0;n<r.length;n++){if(!f(t))return!1;if(!(r[n]in t))return!1;t=t[r[n]]}return!0}};var e=function(t){switch(n(t)){case"object":return Object.keys(t||{});case"function":return Object.keys(t);case"string":return Object.keys(new String(t));default:return[]}};var r=function(t){if("function"!=typeof Symbol)return[];switch(n(t)){case"object":t=t||{};break;case"function":break;default:return[]}for(var e=Object.getOwnPropertySymbols(t),r=e.length-1;0<=r;r--){Object.getOwnPropertyDescriptor(t,e[r]).enumerable||e.splice(r,1)}return e};var a=function(t){return e(t).concat(r(t))};function o(t){if("object"!==n(t))return!1;if("[object Object]"!==Object.prototype.toString.call(t))return!1;switch(Object.getPrototypeOf(t)){case Object.prototype:case null:return!0;default:return!1}}Object.defineProperty(o,"not",{enumerable:!0,value:function(t){return!o(t)}});var s=o;function h(t){for(var e=1,r=arguments.length;e<r;e++)p(t,arguments[e]);return t}function p(t,e){for(var r=a(e),n=0,o=r.length;n<o;n++){var i=r[n],u=e[i],f=t[i];if(s(u)){if(null==f)t[i]=f={};else if(!s(f))continue;p(f,u)}else if(null==f)try{t[i]=u}catch(t){}}}function g(t){for(var e=t.split("."),r=[],n=0;n<e.length;n++){for(var o=e[n];"\\"===o[o.length-1]&&void 0!==e[n+1];)o=o.slice(0,-1)+".",o+=e[++n];r.push(o)}return r}function v(t,e){var r=null,n=g(e);if(1===n.length)r=t;else{var o=n.slice(0,n.length-1).join(".");null==(r=l.get(t,o))&&(r={},l.set(t,o,r))}return r}function b(e,t,r){for(var n in t){var o=t[n]||{};if(o.transformer){var i=g(n),u=i[i.length-1],f=v(e,n),c=l.get(e,n);l.set(r,n,c),Object.defineProperty(f,u,{get:function(){var t=l.get(r,n);return o.transformer(t,e)},set:function(t){l.set(r,n,t)},configurable:!0,enumerable:!0})}}return e}return function t(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=n,i=e,u={};this.$setSource=function(t){for(var e in this)"function"!=typeof this[e]&&delete this[e];u={},h(this,i=t,r),b(this,o,u)},this.$getSource=function(t){return t?l.get(i,t):i},this.$setAdapter=function(t,e){e?o[t]=e:delete o[t],b(this,o,u)},this.$restore=function(t){var e=function(t,e,r){var n=h({},t);for(var o in e){if((e[o]||{}).transformer){var i=g(o),u=i[i.length-1],f=l.get(r,o),c=v(n,o);Object.defineProperty(c,u,{value:f,configurable:!0,enumerable:!0,writable:!0})}}return n}(this,o,u);return t?l.get(e,t):e},this.$setSource(e)}});
